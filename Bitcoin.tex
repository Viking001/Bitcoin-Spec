\documentclass[a4paper,runningheads,11pt]{llncs}

% ---- Packages ----
\usepackage[UKenglish]{babel}	% Language
\usepackage{makeidx}			% Indexing
\usepackage{titletoc}			% Table of contents
\usepackage[colorlinks]{hyperref}			% Clickable links
\usepackage{fancyhdr}			% Running header

\usepackage{etex}
\usepackage[left=3.2cm,right=3.2cm,top=3.7cm,bottom=4cm]{geometry}	% Margin

\usepackage{graphicx}			% Figures
\usepackage{chngcntr}			% Figure and table counter
\usepackage{tabularx}			% Tabular
\usepackage{multirow}			% Multirow
\usepackage{fancyvrb}			% Verbatim
\usepackage{enumitem}			% Customization for enumerate and itemize
\usepackage{url}				% Url

\usepackage{acronym}			% Acronyms
\usepackage{mathtools}
\usepackage{amsmath}			% Math
\usepackage{amsfonts}			% Math fonts
\usepackage[ruled,noend,noline,slide]{algorithm2e}	% Algorithm
\usepackage[title,titletoc,header]{appendix}		% Appendix
%%%----------------------------------------------------------
% Settings
%%%----------------------------------------------------------

% --- Math functions ---
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

% --- Appendix settings ---
\makeatletter
\newcommand{\@chapapp}{\relax}%
\makeatother

% --- Running header settings ---
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{ \markright{#1} }
\newcommand{\titlemark}{ Bitcoin Developer Reference }
\newcommand{\bibmark}{ Bibliography }

\fancyhf{}
\fancyhead[LE,RO]{\bfseries\thepage}
\fancyhead[LO]{\bfseries\rightmark} % Odd pages, section name printed
\fancyhead[RE]{\bfseries\titlemark} % Even pages
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\addtolength{\headheight}{0.5pt}
\fancypagestyle{plain}{
	\fancyhead{}
	\renewcommand{\headrulewidth}{0pt}
}

% --- Figure and Table numbering ---
\counterwithin{figure}{section}
\counterwithin{table}{section}

% --- Custom table settings ---
\newcolumntype{C}[1]{ >{\centering\arraybackslash\smallskip} m{#1}<{\smallskip} }

\newcommand{\bigcell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}}
\def\tabularxcolumn#1{m{#1}}

% --- Custom list settings ---
\newlength{\wideitemsep}
\setlength{\wideitemsep}{.5\itemsep}
\addtolength{\wideitemsep}{5pt}
\let\olditem\item
\renewcommand{\item}{\setlength{\itemsep}{\wideitemsep}\olditem}


\begin{document}

% ---- Make a proper TOC despite llncs ----
\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}
\makeatletter
\renewcommand*\l@author[2]{}
\renewcommand*\l@title[2]{}
\makeatletter


%%%----------------------------------------------------------
% Front page definition
%%%----------------------------------------------------------

\title{Bitcoin Developer Reference}
\subtitle{Working Paper\\Last changes: \today}

\author{Krzysztof Okupski}

\institute{Technische Universiteit Eindhoven, The Netherlands\\
\email{k.s.okupski@student.tue.nl}}



%%%----------------------------------------------------------
\frontmatter
\maketitle

\clearpage
\tableofcontents
%%%----------------------------------------------------------



%%%----------------------------------------------------------
\mainmatter
%%%----------------------------------------------------------

\input{Chapters/Introduction}

\input{Chapters/Preliminaries}

\clearpage
\input{Chapters/Architecture}

\clearpage
\input{Chapters/Ownership}

\clearpage
\input{Chapters/Blockchain}

\clearpage
\input{Chapters/Acknowledgements}



%%%----------------------------------------------------------
% Appendix formatting
%%%----------------------------------------------------------
\addtocontents{toc}{\protect\vskip15pt}
\renewcommand*{\thesection}{\appendixname~\Alph{section}}

\titlecontents{section}
  [7em]{}
  {\bfseries\contentslabel{6em}\vspace{6pt}}
  {\hspace*{0em}}
  {\titlerule*[0.422pc]{.}\contentspage}

%%%----------------------------------------------------------
\clearpage
\include{Chapters/Appendices}


%%%----------------------------------------------------------
% Bibliography
%%%----------------------------------------------------------
\clearpage
\fancypagestyle{plain}{ % new plain style
  \fancyhf{} % Clear header/footer
  \fancyhead[LE,RO]{\bfseries\thepage}
  \fancyhead[LO]{\bfseries\bibmark} % Odd pages, section name printed
  \fancyhead[RE]{\bfseries\titlemark} % Right header
}
\pagestyle{plain}
\bibliographystyle{ieeetr}
\bibliography{literature}

\end{document}
